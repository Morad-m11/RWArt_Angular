@if (!success()) {
    <form class="form-fields" [formGroup]="form" (submit)="submit()">
        <mat-form-field>
            <mat-icon matPrefix>key</mat-icon>
            <mat-label>New password</mat-label>
            <input matInput type="password" [formControl]="form.controls.password" />
            <mat-error [appFormError]="form.controls.password" />
        </mat-form-field>

        <mat-form-field>
            <mat-icon matPrefix>key</mat-icon>
            <mat-label>Confirm password</mat-label>
            <input matInput type="password" [formControl]="form.controls.passwordConfirm" />
            <mat-error [appFormError]="form.controls.passwordConfirm" />
        </mat-form-field>

        @if (errorMessage()) {
            <p class="text-error">{{ errorMessage() }}</p>
        }

        <div>
            <button
                type="submit"
                mat-flat-button
                [appLoading]="loading()"
                [disabled]="loading() || form.invalid">
                Set new password
            </button>
        </div>
    </form>
} @else {
    <app-result-card>
        <mat-icon class="icon-primary">check</mat-icon>
        <span class="text-primary">Password reset successfully!</span>
    </app-result-card>
}
