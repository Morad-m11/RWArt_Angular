@if (profile.isLoading()) {
    <mat-spinner diameter="24" />
} @else if (!profile.hasValue() || profile.error()) {
    <a mat-flat-button routerLink="login">Login</a>
} @else {
    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="profile-button">
        <mat-icon>account_circle</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
        <ng-template matMenuContent>
            <mat-card appearance="outlined">
                <mat-card-header>
                    <mat-card-title>
                        {{ profile.value().username | titlecase }}
                    </mat-card-title>
                </mat-card-header>

                <mat-card-content>
                    <mat-list>
                        <mat-list-item>
                            <span matListItemTitle>ID</span>
                            <span matListItemLine>{{ profile.value().id }}</span>
                        </mat-list-item>

                        <mat-list-item>
                            <span matListItemTitle>E-Mail</span>
                            <span matListItemLine>{{ profile.value().email }}</span>
                        </mat-list-item>
                    </mat-list>
                </mat-card-content>

                <mat-card-actions align="end">
                    <button mat-button (click)="logout()">Logout</button>
                </mat-card-actions>
            </mat-card>
        </ng-template>
    </mat-menu>
}
